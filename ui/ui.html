<!DOCTYPE html>
<html class="h-full">
<head>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(-10px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
        @keyframes pulse {
            0%, 100% { opacity: 1; }
            50% { opacity: 0.5; }
        }
        .fade-in { animation: fadeIn 0.3s ease-out; }
        .pulse { animation: pulse 2s infinite; }
        textarea:focus {
            outline: none;
            box-shadow: 0 0 0 2px rgba(99, 102, 241, 0.5);
        }
        button { transition: all 0.2s ease; }
        button:hover {
            transform: translateY(-2px);
            box-shadow: 0 4px 12px rgba(99, 102, 241, 0.3);
        }
        button:active { transform: translateY(0); }
        .status { transition: all 0.3s ease; }
    </style>
</head>
<body class="bg-[#0a0a0a] h-full p-4 flex flex-col">
    <div class="flex items-center gap-3 mb-4">
        <div class="w-3 h-3 bg-indigo-500 rounded-full pulse"></div>
        <h1 class="text-xl font-bold text-white">Teardown Executor</h1>
    </div>
    
    <div class="flex-1 bg-[#141414] rounded-sm p-2 border border-[#252525] mb-4 min-h-0">
        <textarea id="code"
            class="w-full h-full bg-[#0a0a0a] text-gray-100 text-sm font-mono p-4 rounded-sm border border-[#252525] resize-none placeholder-gray-600"
            placeholder="-- Enter Lua code here..."></textarea>
    </div>
    
    <div class="flex gap-3">
        <button onclick="execute()"
            class="flex-1 bg-indigo-600 hover:bg-indigo-500 text-white font-medium py-2 px-4 rounded-sm">
            Execute
        </button>
        <button onclick="load_file()"
            class="bg-[#1a1a1a] hover:bg-[#252525] text-gray-300 font-medium py-2 px-4 rounded-sm border border-[#252525]">
            Load File
        </button>
        <button onclick="clear_code()"
            class="bg-[#1a1a1a] hover:bg-[#252525] text-gray-300 font-medium py-2 px-4 rounded-sm border border-[#252525]">
            Clear
        </button>
    </div>
    
    <div id="status" class="status mt-2 text-center text-sm text-gray-500 opacity-0">
        Ready
    </div>
    
    <script>
        function showStatus(msg, isError = false) {
            const status = document.getElementById('status');
            status.textContent = msg;
            status.className = `status mt-2 text-center text-sm ${isError ? 'text-red-400' : 'text-green-400'} opacity-100`;
            setTimeout(() => status.className = 'status mt-2 text-center text-sm text-gray-500 opacity-0', 2000);
        }
        function execute() {
            const code = document.getElementById('code').value;
            if (!code.trim()) {
                showStatus('No code to execute', true);
                return;
            }
            if (window.cpp_execute) {
                window.cpp_execute(code);
            }
            showStatus('Executed successfully');
        }
        function load_file() {
            if (window.cpp_load_file) {
                window.cpp_load_file().then(code => {
                    if (code) {
                        document.getElementById('code').value = code;
                        showStatus('File loaded');
                    }
                });
            }
        }
        function clear_code() {
            document.getElementById('code').value = '';
            showStatus('Cleared');
        }
    </script>
</body>
</html>